<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> 
<html> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <title>Supprimer les accents des titres blogofile</title>
        <meta name="author" content="Guillaume VINCENT" />
        <meta name="viewport" content="width=device-width">
        <link rel="icon" type="image/png" href="/favicon.png">
        <link rel="stylesheet" href="/css/reset.css">
        <link rel="stylesheet" href="/css/style.css">
        <link rel="stylesheet" href="/css/pygments.css" type="text/css" />        
        <!-- jquery -->
        <script src="http://code.jquery.com/jquery-1.9.0.min.js"></script>
    </head>
    <body id="top">
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <div id="header-container">
            <header class="wrapper clearfix">
                <a href="/index.html">
                    <h1 id="title"><span>Guillaume</span><span id="nom">Vincent</span></h1>
                </a>
                <nav>
                    <ul>
                        <li><a href="/index.html" id="index">Accueil</a></li>
                        <li><a href="https://github.com/guillaumevincent/">Code</a></li>
                        <li><a href="/contact.html">Contact</a></li>
                    </ul>
                </nav>
            </header>
        </div>

        <div id="main-container" class="wrapper clearfix">
            <div id="post_header" class="clearfix">
	<h1>Supprimer les accents des titres blogofile</h1> 
	<div class="post_date"> 29 Jan 2012	</div>
</div>


<div id="post" class="clearfix">
	<p>Blogofile, le générateur de blog statique que j&#8217;utilise, a la fâcheuse tendance de mettre des accents dans les permaliens de nos billets. C&#8217;est assez ennuyeux, surtout si comme moi votre hébergeur n&#8217;accepte pas les caractères unicodes dans ses urls. J&#8217;ai modifié un hack de <a href='http://twitter.com/zzzeek'>zzzeek</a> qui corrigeait ce défaut, mais qui supprimait les accents. J&#8217;ai amélioré cette modification pour remplacer les accents par les lettres correspondantes.</p>
<a href='http://techspot.zzzeek.org/2010/12/06/my-blogofile-hacks/'>ancien hack</a><div>
  <pre><code class='python'>diff --git a/_controllers/blog/post.py b/_controllers/blog/post.py
index c95b580..0a8922e 100644
--- a/_controllers/blog/post.py
+++ b/_controllers/blog/post.py
@@ -24,6 +24,8 @@ import BeautifulSoup
 
 import blogofile_bf as bf
 
+import unicodedata
+
 logger = logging.getLogger(&quot;blogofile.post&quot;)
 
 config = bf.config.controllers.blog.post
@@ -158,7 +160,8 @@ class Post(object):
	          text = ''.join(s.findAll(text=True))\
	                              .replace(&quot;\n&quot;, &quot;&quot;).split(&quot; &quot;)
	          return &quot; &quot;.join(text[:num_words]) + '...'
-        
+  	
+
	 def __post_process(self):
	     # fill in empty default value
	     if not self.title:
@@ -166,7 +169,31 @@ class Post(object):
	                 datetime.datetime.now().strftime(&quot;%Y-%m-%d %H:%M:%S&quot;))
	     
	     if not self.slug:
-            self.slug = re.sub(&quot;[ ?]&quot;, &quot;-&quot;, self.title).lower()
+			#original blogofile hack by zzzeek			
+			#http://techspot.zzzeek.org/2010/12/06/my-blogofile-hacks/
+
+			slug = self.title.lower()
+
+			#accents replaced by the corresponding letters without accent
+			nkfd_form = unicodedata.normalize('NFKD', unicode(slug))
+			slug = u&quot;&quot;.join([c for c in nkfd_form if not unicodedata.combining(c)])
+
+			# convert ellipses to spaces
+			slug = re.sub(r'\.{2,}', ' ', slug)
+
+			# flatten everything non alpha or . into a single -
+			slug = re.sub(r'[^0-9a-zA-Z\.]+', '-', slug)
+
+			# trim off leading/trailing -
+			slug = re.sub(r'^-+|-+$', '', slug)
+			self.slug = slug
+
+			#######################################################
+
+			# original
+			#self.slug = re.sub(&quot;[ ?]&quot;, &quot;-&quot;, self.title).lower()
+
+			#######################################################
 
	     if not self.date:
	         self.date = datetime.datetime.now(pytz.timezone(self.__timezone))</code></pre>
</div>
</div>

<div id="social" class="wrapper clearfix">
	<ul id="social_icon">
		<li id="panel1"><a id="twitter" href="" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=500,width=600');return false;"></a></li>
		<li id="panel2"><a id="googleplus" href="" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=500,width=600');return false;"></a></li>
		<li id="panel3"><a id="facebook" href="" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=500,width=600');return false;"></a></li>
	</ul>
	<a href="#top" class="top" alt="Back to top"></a>
</div>

<script>
	$(document).ready(function() {
	    var pathname = encodeURI(window.location);
		var tweeturl = 'http://twitter.com/share?url=' + pathname + '&text=Supprimer les accents des titres blogofile&via=rolalagile';
	 	$("#twitter").attr("href", tweeturl);

		var googleplusurl = 'https://plus.google.com/share?url=' + pathname
	 	$("#googleplus").attr("href", googleplusurl);

	 	var facebookurl = 'http://www.facebook.com/share.php?u=' + pathname
	 	$("#facebook").attr("href", facebookurl);
	});
</script>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'guillaumevincent'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>




        </div>

        <!-- google analytics -->
        <script type="text/javascript">

          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-34916388-1']);
          _gaq.push(['_setDomainName', 'guillaumevincent.com']);
          _gaq.push(['_trackPageview']);

          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();

        </script>
    </body>
</html>