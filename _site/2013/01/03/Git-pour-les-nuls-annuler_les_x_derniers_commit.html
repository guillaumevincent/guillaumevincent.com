<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--><html class="no-js" lang="fr"><!--<![endif]-->

<head>
    <meta charset="utf-8">
    <title>Git pour les nuls - Annuler les x derniers commit</title>
    <meta name="viewport" content="width=device-width" />
    <title>Site personnel de Guillaume Vincent</title>

    <link rel="stylesheet" href="/css/normalize.css" />
    <link rel="stylesheet" href="/css/foundation.css" />
    <link rel="stylesheet" href="/css/style.css" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/css/pygments.css" />
    <script src="/js/custom.modernizr.js"></script>

</head>
<body>

  <nav style="" class="top-bar">
    <ul class="title-area">
      <!-- Title Area -->
      <li class="name">
        <h1><a href="/">Guillaume <span class="orange">Vincent</span></a></h1>
    </li>
    <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
    <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
</ul>


<section class="top-bar-section">
  <!-- Right Nav Section -->
  <ul class="right">
    <li class="divider"></li>
    <li class="has-form">
      <a href="/" class="button alert">Blog</a>
  </li>
  <li class="divider"></li>
  <li class="has-form">
      <a href="https://github.com/guillaumevincent/" class="button success">Code</a>
  </li>
  <li class="divider"></li>
  <li class="has-form">
      <a href="/contact.html" class="button">A propos</a>
  </li>
  <li class="divider"></li>
  <li class="has-form">
      <a href="http://okiwi.org/" class="button okiwi">Okiwi</a>
  </li>
  <li class="divider"></li>
    <li class="has-form">
      <a href="http://guillaumevincent.com/feed.xml" class="button rss">RSS</a>
  </li>
</ul>
</section>
</nav>

<script src="/js/jquery-1.9.0.min.js"></script>


<div class="row">
	<div class="large-9 columns post-title"><h1>Git pour les nuls - Annuler les x derniers commit</h1> </div>
	<div class="large-3 columns post-date"> 03 Jan 2013 </div>
</div>


<div class="row">
	<div class="large-12 columns post-content">
		<img src='https://lh4.googleusercontent.com/-Y-dQtb7aNbs/UNb2LIpJi7I/AAAAAAAAIMQ/_U2_lbjs0dk/s406/git%2520rebase%2520example.png' /><p>
Pour mes projets personnels j'utilise trois environnements de travail :
<ul>
	<li>un environnement de développement sur lequel je viens tester des fonctionnalités</li>
	<li>un environnement de recette où je valide les modifications développées</li>
	<li>un environnement de production</li>
</ul>

A la fin de chaque itération lors du développement de mon logiciel je produit une version améliorée de mon logiciel. Cette version que j'appelle souvent release-vX.X est toujours précédée d'une mise en recette pour valider que mon code ne va pas tout détruire en production.
Je me retrouve souvent dans l'obligation de faire des corrections mineures pour des erreurs de typographie ou des erreurs de configurations la plus part du temps.

Et dans mon cas je ne veux pas merger en production tous ces commits inutiles.
Il existe trois solutions sous Git pour "squash" les X derniers commits ou en français pour "écraser" les X derniers commits pour qu'ils n'en fassent plus qu'un:
</p><div class='highlight'><pre><code class='console'><span class='go'>git rebase</span>
<span class='go'>git merge --squash	  	</span>
<span class='go'>git reset</span>
</code></pre>
</div><p>
	Je préfère la solution git reset plus intuitive à mon goût.
	Premièrement on s'assure que notre environnement de travail ne comporte pas de modifications en cours:
</p><div class='highlight'><pre><code class='console'><span class='go'>git status</span>
<span class='gp'>#</span> On branch master
<span class='go'>nothing to commit, working directory clean</span>
</code></pre>
</div><p>
	Ensuite j'effectue un rebase pour écraser X commits. Dans mon exemple je veux me re-placer au niveau du tag soit 4 commits avant.
	Je tappe donc la commande suivante:
</p><div class='highlight'><pre><code class='console'><span class='go'>git reset --soft HEAD~4</span>
<span class='go'>git commit -m &quot;release v1.0&quot;</span>
</code></pre>
</div><img src='https://lh4.googleusercontent.com/-hJev3pzvxdQ/UNb2LAF160I/AAAAAAAAIMQ/O72XSWO6kTI/s826/git%2520rebase%2520example2.png' />
	</div>
</div>
<div class="row">
	<hr/>
	<div class="large-12 columns">
		<ul id="social_icon">
			<li id="panel1"><a id="twitter" href="" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=500,width=600');return false;"></a></li>
			<li id="panel2"><a id="googleplus" href="" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=500,width=600');return false;"></a></li>
			<li id="panel3"><a id="facebook" href="" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=500,width=600');return false;"></a></li>
		</ul>
		<a href="#top" class="top" alt="Back to top"></a>
	</div>
</div>
<script>
$(document).ready(function() {
	var pathname = encodeURI(window.location);
	var tweeturl = 'http://twitter.com/share?url=' + pathname + '&text=Git pour les nuls - Annuler les x derniers commit&via=rolalagile';
	$("#twitter").attr("href", tweeturl);

	var googleplusurl = 'https://plus.google.com/share?url=' + pathname
	$("#googleplus").attr("href", googleplusurl);

	var facebookurl = 'http://www.facebook.com/share.php?u=' + pathname
	$("#facebook").attr("href", facebookurl);
});
</script>
<div class="row">

	<div id="disqus_thread" class="large-12 columns"></div>
</div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'guillaumevincent'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
    	var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    	dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
	Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>








<!-- google analytics -->
<script type="text/javascript">

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-34916388-1']);
_gaq.push(['_setDomainName', 'guillaumevincent.com']);
_gaq.push(['_trackPageview']);

(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

</script>

<script src="/js/foundation.min.js"></script>
  <!--
  
  <script src="js/foundation/foundation.js"></script>
  
  <script src="js/foundation/foundation.alerts.js"></script>
  
  <script src="js/foundation/foundation.clearing.js"></script>
  
  <script src="js/foundation/foundation.cookie.js"></script>
  
  <script src="js/foundation/foundation.dropdown.js"></script>
  
  <script src="js/foundation/foundation.forms.js"></script>
  
  <script src="js/foundation/foundation.joyride.js"></script>
  
  <script src="js/foundation/foundation.magellan.js"></script>
  
  <script src="js/foundation/foundation.orbit.js"></script>
  
  <script src="js/foundation/foundation.placeholder.js"></script>
  
  <script src="js/foundation/foundation.reveal.js"></script>
  
  <script src="js/foundation/foundation.section.js"></script>
  
  <script src="js/foundation/foundation.tooltips.js"></script>
  
  <script src="js/foundation/foundation.topbar.js"></script>
  
-->

<script>
$(document).foundation();
</script>
</body>
</html>
